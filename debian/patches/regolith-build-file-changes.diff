Build and gschema changes to differentiate from upstream
Index: regolith-control-center/panels/meson.build
===================================================================
--- regolith-control-center.orig/panels/meson.build
+++ regolith-control-center/panels/meson.build
@@ -3,33 +3,30 @@ subdir('common')
 panels = [
   'applications',
   'background',
-  'camera',
+
   'color',
   'datetime',
   'default-apps',
   'diagnostics',
   'display',
-  'firmware-security',
+
   'info-overview',
   'keyboard',
   'location',
-  'microphone',
+
   'mouse',
-  'multitasking',
-  'notifications',
+
   'online-accounts',
   'power',
   'printers',
   'region',
   'removable-media',
-  'screen',
-  'search',
+
   'sharing',
   'sound',
   'universal-access',
   'usage',
   'user-accounts',
- 'wwan',
 ]
 
 if host_is_linux
Index: regolith-control-center/shell/org.gnome.Settings.service.in
===================================================================
--- regolith-control-center.orig/shell/org.gnome.Settings.service.in
+++ regolith-control-center/shell/org.gnome.Settings.service.in
@@ -1,3 +1,3 @@
 [D-BUS Service]
-Name=org.gnome.Settings
-Exec=@bindir@/gnome-control-center
+Name=org.regolith.Settings
+Exec=@bindir@/regolith-control-center
Index: regolith-control-center/man/regolith-control-center.xml
===================================================================
--- /dev/null
+++ regolith-control-center/man/regolith-control-center.xml
@@ -0,0 +1,361 @@
+<?xml version='1.0'?>
+<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
+        "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
+
+<refentry id="regolith-control-center">
+
+        <refentryinfo>
+                <title>regolith-control-center</title>
+                <productname>GNOME</productname>
+
+                <authorgroup>
+                        <author>
+                                <contrib>Maintainer</contrib>
+                                <firstname>Bastien</firstname>
+                                <surname>Nocera</surname>
+                                <email>hadess@hadess.net</email>
+                        </author>
+                </authorgroup>
+
+        </refentryinfo>
+
+        <refmeta>
+                <refentrytitle>regolith-control-center</refentrytitle>
+                <manvolnum>1</manvolnum>
+                <refmiscinfo class="manual">User Commands</refmiscinfo>
+        </refmeta>
+
+        <refnamediv>
+                <refname>regolith-control-center</refname>
+                <refpurpose>Configure GNOME settings</refpurpose>
+        </refnamediv>
+
+        <refsynopsisdiv>
+                <cmdsynopsis>
+                        <command>regolith-control-center <arg choice="opt" rep="repeat">OPTION</arg> <arg choice="opt">PANEL</arg> <arg choice="opt" rep="repeat">ARG</arg></command>
+                </cmdsynopsis>
+        </refsynopsisdiv>
+
+        <refsect1>
+                <title>Description</title>
+
+                <para><command>regolith-control-center</command> is a graphical
+                user interface to configure various aspects of GNOME.</para>
+
+                <para>When run without arguments, the shell displays the
+                <firstterm>overview</firstterm>, which shows all available
+                configuration panels. The overview allows to open individual
+                panels by clicking on them. It also has a search entry
+                to find panels by searching keywords.</para>
+
+                <para>It is also possible to specify a panel name
+                as commandline argument to go directly to that panel.
+                Individual panels may accept further arguments to specify
+                which tab to open (for multi-tabbed panels) or which
+                item to display (for panels with lists).</para>
+
+                <para>Note that <command>regolith-control-center</command>
+                is not meant to expose each and every setting that is
+                available. The settings that can be found here represent
+                what is considered useful and commonly needed options.
+                For more exotic or uncommon options, you can look at
+                <command>gnome-tweak-tool</command> or the
+                <command>gsettings</command> commandline utility.</para>
+        </refsect1>
+
+        <refsect1>
+                <title>Panels</title>
+
+                <para>The following panel names can be specified:</para>
+
+                <variablelist>
+                        <varlistentry>
+                                <term><option>background</option></term>
+
+                                <listitem><para>The background panel lets you
+                                set your desktop background.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>bluetooth</option></term>
+
+                                <listitem><para>The bluetooth panel lets you
+                                configure your computer's Bluetooth adapter,
+                                and pair the computer with Bluetooth keyboards,
+                                phones, etc.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>color</option></term>
+
+                                <listitem><para>The color panel can calibrate
+                                monitors, web cams and printers for accurate
+                                color reproduction.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>datetime</option></term>
+
+                                <listitem><para>The datetime panel lets you
+                                set the timezone and time format.</para>
+                                <para>Some operations in this panel
+                                affect all user accounts on the computer
+                                and require privieges.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>display</option></term>
+
+                                <listitem><para>The display panel configures
+                                the resolution and arrangement of monitors
+                                and laptop panels. Note that monitors can be
+                                rearranged by drag-and-drop, and you can change
+                                which monitor is your main display by dragging
+                                the black bar.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>info-overview</option></term>
+
+                                <listitem><para>The info-overview panel shows a general
+                                overview of the system configuration. It also
+                                lets you change the default applications for
+                                various tasks and the handling of removable
+                                media.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>keyboard</option></term>
+
+                                <listitem><para>The keyboard panel can
+                                change how the keyboard reacts to key
+                                presses and lets you change keyboard
+                                shortcuts or create custom shortcuts.</para>
+                                <para>You can open this panel on a
+                                specific tab by passing <option>typing</option>
+                                or <option>shortcuts</option> as extra
+                                argument.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>mouse</option></term>
+
+                                <listitem><para>The mouse panel can change
+                                how mice and touchpads react to user
+                                input.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>network</option></term>
+
+                                <listitem><para>The network panel provides
+                                a view of available network devices (wired,
+                                wireless or mobile) and their current
+                                configuration. It also provides a way to
+                                create new VPN connections and configure
+                                proxy settings.</para>
+                                <para>You can open this panel on a
+                                specific dialog by passing
+                                <option>create-wifi</option>,
+                                <option>connect-hidden-wifi</option>,
+                                <option>connect-3g</option>,
+                                <option>connect-8021x-wifi</option> or
+                                <option>show-device</option> as extra
+                                argument. The last three parameters
+                                require an additional extra argument for
+                                the network object in the form 
+                                <replaceable>/org/freedesktop/NetworkManager/Devices/0</replaceable>.
+                                </para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>notifications</option></term>
+
+                                <listitem><para>The notifications panel provides
+                                a way to control the display of notifications.
+                                </para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>online-accounts</option></term>
+
+                                <listitem><para>The online-accounts panel
+                                shows your configured online accounts and
+                                lets you add or remove accounts.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>power</option></term>
+
+                                <listitem><para>The power panel shows
+                                the fill level of batteries and can
+                                configure what happens when the computer
+                                is idle or runs out of battery.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>printers</option></term>
+
+                                <listitem><para>The printers panel shows
+                                all known printers and their status. It is
+                                possible to inspect queued print jobs and
+                                add new printers.</para>
+                                <para>Some operations in this panel require
+                                privileges.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>privacy</option></term>
+
+                                <listitem><para>The privacy panel allows
+                                to control visible file usage history, temporary
+                                files, and name.
+                                </para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>region</option></term>
+
+                                <listitem><para>The region panel
+                                contains regional settings such as
+                                the display language, formatting for
+                                times, dates, numbers, and input sources.
+                                </para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>search</option></term>
+
+                                <listitem><para>The search panel controls
+                                the results visible in the overview, and the
+                                files and folders to be indexed.
+                                </para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>screen</option></term>
+
+                                <listitem><para>The screen panel contains
+                                settings that control the screen brightness
+                                and screen lock behavior.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>sharing</option></term>
+
+                                <listitem><para>The sharing panel contains
+                                settings that control what is shared over the
+                                network.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>sound</option></term>
+
+                                <listitem><para>The sound panel shows
+                                all known sound devices and their configuration,
+                                including volume and balance settings.</para>
+                                <para>You can open this panel on a
+                                specific tab by passing
+                                <option>output</option>,
+                                <option>input</option>,
+                                <option>hardware</option>,
+                                <option>effects</option> or
+                                <option>applications</option> as extra
+                                argument.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>universal-access</option></term>
+
+                                <listitem><para>The universal-access panel
+                                contains settings for accessible technologies
+                                such as the screen reader, magnifier, screen
+                                keyboard and AccessX options.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>user-accounts</option></term>
+
+                                <listitem><para>The user-accounts panel
+                                shows all user accounts that exist on the
+                                computer and allows to change them in some
+                                ways, such as changing the user name, password
+                                or permissions. It also allows to create
+                                or remove accounts.</para>
+                                <para>Some operations in this panel require
+                                privileges.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>wacom</option></term>
+
+                                <listitem><para>the wacom panel shows
+                                connected Wacom graphics tablets and lets
+                                you calibrate and configure such devices.</para></listitem>
+                        </varlistentry>
+
+                </variablelist>
+
+        </refsect1>
+
+        <refsect1>
+                <title>Options</title>
+
+                <variablelist>
+                        <varlistentry>
+                                <term><option>-?</option>, <option>--help</option></term>
+
+                                <listitem><para>Prints a short help
+                                text and exits.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>--version</option></term>
+
+                                <listitem><para>Prints the program version
+                                and exits.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>-v</option>, <option>--verbose</option></term>
+
+                                <listitem><para>Enables verbose mode.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>-l</option>, <option>--list</option></term>
+
+                                <listitem><para>Lists the available panels
+                                and exits.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><option>-o</option>, <option>--overview</option></term>
+
+                                <listitem><para>Opens the overview.</para></listitem>
+			</varlistentry>
+
+                        <varlistentry>
+				<term><option>-s</option> <replaceable>term</replaceable>, <option>--search</option> <replaceable>term</replaceable></term>
+
+                                <listitem><para>Sets the following search term.</para></listitem>
+                        </varlistentry>
+
+                </variablelist>
+        </refsect1>
+
+        <refsect1>
+                <title>Exit status</title>
+
+                <para>On success 0 is returned, a non-zero failure
+                code otherwise.</para>
+        </refsect1>
+
+        <refsect1>
+                <title>See Also</title>
+                <para>
+                        <citerefentry><refentrytitle>gsettings</refentrytitle><manvolnum>1</manvolnum></citerefentry>
+                </para>
+        </refsect1>
+
+</refentry>
Index: regolith-control-center/shell/regolith-control-center.gresource.xml
===================================================================
--- /dev/null
+++ regolith-control-center/shell/regolith-control-center.gresource.xml
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<gresources>
+  <gresource prefix="/org/regolith/Settings/gtk">
+    <file preprocess="xml-stripblanks">cc-panel.ui</file>
+    <file preprocess="xml-stripblanks">cc-panel-list.ui</file>
+    <file preprocess="xml-stripblanks">cc-window.ui</file>
+    <file preprocess="xml-stripblanks">help-overlay.ui</file>
+    <file>style.css</file>
+  </gresource>
+
+  <!-- Panel icons -->
+  <gresource prefix="/org/regolith/Settings">
+    <file preprocess="xml-stripblanks">icons/multitasking-symbolic.svg</file>
+    <file>style.css</file>
+  </gresource>
+</gresources>
Index: regolith-control-center/shell/cc-panel-loader.c
===================================================================
--- regolith-control-center.orig/shell/cc-panel-loader.c
+++ regolith-control-center/shell/cc-panel-loader.c
@@ -104,7 +104,7 @@ static CcPanelLoaderVtable default_panel
 #ifdef BUILD_BLUETOOTH
   PANEL_TYPE("bluetooth",        cc_bluetooth_panel_get_type,            NULL),
 #endif
-  PANEL_TYPE("camera",           cc_camera_panel_get_type,               NULL),
+  // PANEL_TYPE("camera",           cc_camera_panel_get_type,               NULL),
   PANEL_TYPE("color",            cc_color_panel_get_type,                NULL),
   PANEL_TYPE("datetime",         cc_date_time_panel_get_type,            NULL),
   PANEL_TYPE("default-apps",     cc_default_apps_panel_get_type,         NULL),
@@ -114,21 +114,21 @@ static CcPanelLoaderVtable default_panel
   PANEL_TYPE("keyboard",         cc_keyboard_panel_get_type,             NULL),
   PANEL_TYPE("location",         cc_location_panel_get_type,             NULL),
   // PANEL_TYPE("firmware-security",cc_firmware_security_panel_get_type,    cc_firmware_security_panel_static_init_func),
-  PANEL_TYPE("microphone",       cc_microphone_panel_get_type,           NULL),
+  // PANEL_TYPE("microphone",       cc_microphone_panel_get_type,           NULL),
   PANEL_TYPE("mouse",            cc_mouse_panel_get_type,                NULL),
-  PANEL_TYPE("multitasking",     cc_multitasking_panel_get_type,         NULL),
+  // PANEL_TYPE("multitasking",     cc_multitasking_panel_get_type,         NULL),
 #ifdef BUILD_NETWORK
   PANEL_TYPE("network",          cc_network_panel_get_type,              NULL),
   PANEL_TYPE("wifi",             cc_wifi_panel_get_type,                 cc_wifi_panel_static_init_func),
 #endif
-  PANEL_TYPE("notifications",    cc_notifications_panel_get_type,        NULL),
+  // PANEL_TYPE("notifications",    cc_notifications_panel_get_type,        NULL),
   PANEL_TYPE("online-accounts",  cc_online_accounts_panel_get_type,      NULL),
   PANEL_TYPE("power",            cc_power_panel_get_type,                NULL),
   PANEL_TYPE("printers",         cc_printers_panel_get_type,             NULL),
   PANEL_TYPE("region",           cc_region_panel_get_type,               NULL),
   PANEL_TYPE("removable-media",  cc_removable_media_panel_get_type,      NULL),
-  PANEL_TYPE("screen",           cc_screen_panel_get_type,               NULL),
-  PANEL_TYPE("search",           cc_search_panel_get_type,               NULL),
+  // PANEL_TYPE("screen",           cc_screen_panel_get_type,               NULL),
+  // PANEL_TYPE("search",           cc_search_panel_get_type,               NULL),
   PANEL_TYPE("sharing",          cc_sharing_panel_get_type,              NULL),
   PANEL_TYPE("sound",            cc_sound_panel_get_type,                NULL),
 #ifdef BUILD_THUNDERBOLT
@@ -141,7 +141,7 @@ static CcPanelLoaderVtable default_panel
   PANEL_TYPE("wacom",            cc_wacom_panel_get_type,                cc_wacom_panel_static_init_func),
 #endif
 #ifdef BUILD_WWAN
-  PANEL_TYPE("wwan",             cc_wwan_panel_get_type,                 cc_wwan_panel_static_init_func),
+  // PANEL_TYPE("wwan",             cc_wwan_panel_get_type,                 cc_wwan_panel_static_init_func),
 #endif
 };
 
Index: regolith-control-center/tests/interactive-panels/main.c
===================================================================
--- regolith-control-center.orig/tests/interactive-panels/main.c
+++ regolith-control-center/tests/interactive-panels/main.c
@@ -65,7 +65,7 @@ main (gint   argc,
   g_autoptr(GtkApplication) application = NULL;
 
   /* Manually register GResources */
-  g_resources_register (gnome_control_center_get_resource ());
+  g_resources_register (regolith_control_center_get_resource ());
   g_resources_register (test_panels_get_resource ());
 
   /* Override the panels vtable with the test panels */
Index: regolith-control-center/shell/org.regolith.Settings.gschema.xml
===================================================================
--- /dev/null
+++ regolith-control-center/shell/org.regolith.Settings.gschema.xml
@@ -0,0 +1,24 @@
+<schemalist>
+  <schema gettext-domain="gnome-control-center-2.0" id="org.regolith.Settings" path="/org/regolith/control-center/">
+    <key name="last-panel" type="s">
+      <default>''</default>
+      <summary>The identifier for the last Settings panel to be opened</summary>
+      <description>
+        The identifier for the last Settings panel to be opened. Unrecognised values
+        will be ignored and the first panel in the list selected.
+      </description>
+    </key>
+    <key name="show-development-warning" type="b">
+      <default>true</default>
+      <summary>Show warning when running a development build of Settings</summary>
+      <description>
+        Whether Settings should show a warning when running a development build.
+      </description>
+    </key>
+    <key type="(iib)" name="window-state">
+      <default>(-1, -1, false)</default>
+      <summary>Initial state of the window</summary>
+      <description>A tuple containing the initial width, height and maximized state of the application window.</description>
+    </key>
+  </schema>
+</schemalist>
Index: regolith-control-center/shell/meson.build
===================================================================
--- regolith-control-center.orig/shell/meson.build
+++ regolith-control-center/shell/meson.build
@@ -166,6 +166,6 @@ libtestshell_deps = common_deps + [ libw
 
 
 install_data (
-  'org.gnome.Settings.gschema.xml',
+  'org.regolith.Settings.gschema.xml',
   install_dir : control_center_schemadir
 )
Index: regolith-control-center/meson.build
===================================================================
--- regolith-control-center.orig/meson.build
+++ regolith-control-center/meson.build
@@ -1,5 +1,5 @@
 project(
-  'gnome-control-center', 'c',
+  'regolith-control-center', 'c',
         version : '43.1',
         license : 'GPL2+',
   meson_version : '>= 0.57.0'
